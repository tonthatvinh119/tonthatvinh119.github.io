define("render",["lodash","utils","core","reactDOM","experiment"],function(a,b,c,d,e){"use strict";function g(a){var c=a.fullFunctionality.getConfig(),d=b.urlUtils.parseUrlParams(window.location.search.replace(/^\??/,""));return c.origin=d.dsOrigin,c}function h(c,d){var e=a(d).keys().pull("masterPage").value();return a.mapValues(d,function(a,d){return window.pagesData&&window.pagesData[d]?a:b.dataFixer.fix(a,e.slice(),c.requestModel,c.currentUrl,c.urlFormatModel)})}function i(b,e,g,h){c.renderer.renderSite(e,g,function(c){if(window.rendered)window.rendered.forceUpdate();else{var e=document.getElementById("SITE_CONTAINER").children[0];window.rendered=d.render(c,document.getElementById("SITE_CONTAINER"));var g=document.getElementById("SITE_CONTAINER").children[0];window.sssr&&(window.sssr.success=e===g,window.sssr.clientSideRender={sinceInitialTimestamp:Date.now()-window.wixBiSession.initialTimestamp,performanceNow:f()}),window.onpopstate=window.rendered.onPopState,window.parent&&window.rendered.registerAspectToEvent("siteReady",function(){window.documentServices&&h&&h(window.rendered),window.parent.postMessage("documentServicesLoaded","*")}),b.qaAutomation&&(a.set(window,"testApi.domSelectors",b.qaAutomation.getDomSelectors(b.react)),window.testApi.domSelectors.setSearchRoot(window.rendered),a.set(window,"testApi.isReady",!0))}})}function j(d,e,f,j,k){var l=d.documentServices,m=c.SiteDataAPI.createSiteDataAPIAndDal(j,e);l&&window.parent.FS&&b.integrations.fullStory.start();var n=m.siteData,o=m.siteDataAPI,p={pointers:m.pointers,displayedDAL:m.displayedDal,siteDataAPI:o};l?(m.dataLoadedRegistrar=o.registerDataLoadedCallback.bind(o),window.documentServices=new l.Site(g(l.configs),m,a.partial(h,f),a.partial(i,d,n,p)),a.set(window,"testApi.documentServices",window.documentServices)):(j.pagesData=j.pagesData&&h(f,j.pagesData),i(d,n,p,k))}function k(b,c,d){var e=b.documentServices;window.documentServices=new e.Site(g(e.configs),{jsonData:c,dataLoadedRegistrar:c.store.registerDataLoadedCallback.bind(c.store)},a.partial(h,d),a.partial(i,b,c,null)),a.set(window,"testApi.documentServices",window.documentServices)}function l(a,c,d,f){var g=a.documentServices,l=new b.SiteData(d,c);e.isOpen("displayedJson")?j(a,c,d,l,f):g?k(a,l,d):(l.pagesData=l.pagesData&&h(d,l.pagesData),i(a,l,null,f))}var f=window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now.bind(Date);return{clientSide:l}});